function selectTranslationItem(t){var n=$("#current_translation"),e=t.attr("reference-label"),i=$("[data-label='"+e+"']");n.val(i.text()),$(".selected_translation_item").removeClass("selected_translation_item"),t.addClass("selected_translation_item"),$("#save_translation").addClass("disabled");var a=$("#translations_list"),s=t.position().top,l=t.height(),o=a.height(),r=a.scrollTop(),d=r+o,c=s+l;s<r?a.scrollTop(s):c>d&&a.scrollTop(c-o),n.focus()}function populateTranslationsList(){var t=$(".translatable"),n=$("#translations_list");n.empty();var e=!0;t.each((function(){var t=$(this).attr("data-label"),i=$("<li></li>");i.attr("reference-label",t),i.text(t),n.append(i),i.click((function(){selectTranslationItem(i)})),e&&(e=!1,selectTranslationItem(i))}))}function displayTranslationsWidget(){var t=$("#translation_widjet");populateTranslationsList(),t.show()}function hideTranslationsWidget(){$("#translation_widjet").hide()}function toggleTranslationsWidget(){$("#translation_widjet").is(":visible")?hideTranslationsWidget():displayTranslationsWidget()}function hideTranslationsWidgetOnEsc(){$(document).keyup((function(t){27==t.keyCode&&hideTranslationsWidget()}))}function hideTranslationsWidgetOnBackgroundClick(){$("#translation_widjet_background").click((function(){hideTranslationsWidget()}))}function hideTranslationsWidgetOnCloseButtonClick(){$("#translation_widjet_close").click((function(){hideTranslationsWidget()}))}function showTranslationsWidgetOnTripleClick(){var t=0,n=0;$(".translatable").click((function(){if(1==++t)n=setTimeout((function(){t=0}),400);else if(3==t){clearTimeout(n),t=0,displayTranslationsWidget();var e=$(this).attr("data-label");$("li[reference-label='"+e+"']").click()}}))}function toggleTranslationsWidgetOnHotKeys(){$(document).keydown((function(t){t.ctrlKey&&t.altKey&&84==t.keyCode&&toggleTranslationsWidget()}))}function enableSaveButtonOnKeystroke(){$("#current_translation").keyup((function(){$("#save_translation").removeClass("disabled")}))}$(document).ready((function(){hideTranslationsWidgetOnEsc(),hideTranslationsWidgetOnBackgroundClick(),hideTranslationsWidgetOnCloseButtonClick(),showTranslationsWidgetOnTripleClick(),toggleTranslationsWidgetOnHotKeys(),enableSaveButtonOnKeystroke()}));