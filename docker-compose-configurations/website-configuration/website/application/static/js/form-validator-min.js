var translations={};function get_translation(a){if(a in translations)return translations[a];var t="/"+$("html").attr("lang")+"/translation/"+a;return $.ajax({url:t,async:!1}).responseText}function form_is_valid(a){var t=!0;return a.find(".validate").each((function(){$(this).hasClass("valid")||(t=!1)})),t}function show_error_message(a,t){var r=get_translation(t),e=$("<p></p>");e.addClass("error-message"),e.attr("for",a.attr("name")),e.text(r),a.parent("p").after(e),a.addClass("error")}function check_not_empty(a){if(null!=a.attr("empty"))return!0;var t=a.val();return""!=(t=t.trim())||(show_error_message(a,"empty_input_field"),!1)}function validation_callback(a){$('p.error-message[for="'+a.attr("name")+'"]').remove(),a.removeClass("error"),a.removeClass("valid"),check_not_empty(a)&&a.addClass("valid"),a.parents("form").find('button[type="submit"]').prop("disabled",!form_is_valid(a.parents("form")))}$(document).ready((function(){$(".validate").blur((function(){validation_callback($(this))})),$(".validate").keyup((function(){var a=$(this),t=null;t&&clearTimeout(t),t=setTimeout((function(){validation_callback(a)}),300)})),$("form").each((function(){var a=$(this);form_is_valid(a)||a.find('button[type="submit"]').prop("disabled",!0)})),$("form").submit((function(a){if(a.preventDefault(),form_is_valid($(this))){var t=$(this),r=t.attr("action"),e=t.attr("method"),n=t.serialize();$.ajax({url:r,method:e,data:n,success:function(a){if(t.find("input").val(""),t.find("textarea").val(""),"redirect_url"in a){var r=a.redirect_url;window.location.replace(r)}},error:function(a){for(var r=a.errors,e=0;e<r;e++){var n=r[e];show_error_message(t.find('input[name="'+n.field+'"]'),n.message)}}})}}))}));