function create_search_result(t,e){var a=$("<li></li>"),r=$("<a></a>"),n=$("<span></span>");return r.attr("href",e.url),r.text(e.name),n.text(e.description),a.append(r),a}function autocomplete_search(){$("ul.autocomplete-search").each((function(){var t=$(this),e=t.attr("for"),a=t.attr("action"),r="/autocomplete-"+a+"/",n=t.attr("method"),c=$('input[name="'+e+'"]'),o=null;c.keyup((function(){o&&clearTimeout(o),o=setTimeout((function(){var e=c.val(),o=$("<span></span>");o.addClass("loader"),$.ajax({url:r,method:n,data:{search:e},success:function(e){t.empty();for(var r=0;r<e.matching_results.length;r++){var n=create_search_result(a,e.matching_results[r]);t.append(n)}},complete:function(){o.remove()}})}),50)}))}))}$(document).ready(autocomplete_search);