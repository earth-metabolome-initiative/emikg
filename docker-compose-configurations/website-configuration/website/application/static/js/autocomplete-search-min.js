function create_search_result(t,e){var a=$("<li></li>"),r=$("<a></a>"),n=$("<span></span>"),c="/"+$("html").attr("lang")+"/"+t+"/"+e.id;return r.attr("href",c),r.text(e.name),n.text(e.description),a.append(r),a}function autocomplete_search(){$("ul.autocomplete-search").each((function(){var t=$(this).attr("for"),e=$(this).attr("action"),a="/autocomplete-"+e+"/",r=$(this).attr("method"),n=$('input[name="'+t+'"]'),c=null;n.keyup((function(){c&&clearTimeout(c),c=setTimeout((function(){var t=n.val(),c=$("<span></span>");c.addClass("loader"),$.ajax({url:a,method:r,data:{search:t},success:function(t){$(this).empty();for(var a=0;a<t.length;a++){var r=create_search_result(e,t[a]);$(this).append(r)}},complete:function(){c.remove()}})}),500)}))}))}$(document).ready(autocomplete_search);