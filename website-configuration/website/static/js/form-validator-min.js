var translations={};function get_translation(a){return a in translations?translations[a]:a}function form_is_valid(a){var t=!0;return a.find(".validate").each((function(){$(this).hasClass("valid")||(t=!1)})),t}function show_error_message(a,t){var e=get_translation(t),r=$("<p></p>");r.addClass("error-message"),r.attr("for",a.attr("name")),r.text(e),a.parents("fieldset").after(r),setTimeout((function(){r.remove(300)}),1e4),r.click((function(){r.remove(300),a.focus()}))}function check_not_empty(a){if(null!=a.attr("empty"))return!0;var t=a.val();return""!=(t=t.trim())||(show_error_message(a,"empty_input_field"),!1)}function check_must_be_equal_to(a){if(null!=a.attr("must_be_equal_to")&&a.val()!=a.attr("must_be_equal_to"))return show_error_message(a,"must_be_equal_to"),!1;return!0}function check_in_group(a){if(null!=a.attr("in-group")){var t=a.val();let e="/validate/"+a.attr("in-group"),r={candidate:t},i=!1;return $.ajax({url:e,method:"POST",data:r,async:!1,success:function(t){i=t.valid,0==t.valid&&show_error_message(a,"not_in_group")}}),i}return!0}function check_not_in_group(a){if(null!=a.attr("not-in-group")){var t=a.val();let e="/validate/"+a.attr("not-in-group"),r={candidate:t},i=!1;return $.ajax({url:e,method:"POST",data:r,async:!1,success:function(t){i=!t.valid,t.valid&&show_error_message(a,"in_group")}}),i}return!0}function check_mime_type(a){if(null!=a.attr("mime-type"))for(var t=a.prop("files"),e=a.attr("mime-type").split(","),r=0;r<t.length;r++){var i=t[r].type;if(-1==e.indexOf(i))return show_error_message(a,"invalid_mime_type"),!1}return!0}function validation_callback(a){if(null==a.attr("last-validated-value")||""==a.attr("last-validated-value")||a.attr("last-validated-value")!=a.val()){$('p.error-message[for="'+a.attr("name")+'"]').remove(),a.attr("last-validated-value",a.val());var t=$('label[for="'+a.attr("name")+'"]');check_not_empty(a)&&check_must_be_equal_to(a)&&check_in_group(a)&&check_not_in_group(a)&&check_mime_type(a)?(a.removeClass("error"),t.removeClass("error"),a.addClass("valid"),t.addClass("valid")):(a.removeClass("valid"),t.removeClass("valid"),a.addClass("error"),t.addClass("error")),a.parents("form").find('button[type="submit"]').prop("disabled",!form_is_valid(a.parents("form")))}}var timeout=null;function timed_validation_callback(a){timeout&&clearTimeout(timeout),timeout=setTimeout((function(){validation_callback(a)}),300)}$(document).ready((function(){$(".validate").blur((function(){timed_validation_callback($(this))})),$(".validate").keyup((function(){timed_validation_callback($(this))})),$("form").each((function(){var a=$(this);form_is_valid(a)||a.find('button[type="submit"]').prop("disabled",!0)})),$("form").submit((function(a){if(a.preventDefault(),form_is_valid($(this))){var t=$(this),e=t.attr("action"),r=t.attr("method"),i=t.serialize();$.ajax({url:e,method:r,data:i,success:function(a){if(t.find("input").val(""),t.find("textarea").val(""),"redirect_url"in a){var e=a.redirect_url;window.location.replace(e)}},error:function(a){for(var e=a.errors,r=0;r<e;r++){var i=e[r];show_error_message(t.find('input[name="'+i.field+'"]'),i.message)}}})}})),$("label.dropzone").each((function(){var a=$(this),t=a.find('input[type="file"]');a.on("drop",(function(e){e.preventDefault(),e.stopPropagation(),a.removeClass("dragover");var r=e.originalEvent.dataTransfer.files;t.prop("files",r),a.addClass("dropped"),t.hasClass("validate")&&timed_validation_callback(t)})),t.change((function(){a.addClass("dropped"),t.hasClass("validate")&&timed_validation_callback(t)})),a.on("dragover",(function(t){t.preventDefault(),t.stopPropagation(),a.addClass("dragover")})),a.on("dragout",(function(t){t.preventDefault(),t.stopPropagation(),a.removeClass("dragover")}))}))}));